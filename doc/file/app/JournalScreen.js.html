<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">app/JournalScreen.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/CurriculumScreen.js~CurriculumScreen.html">CurriculumScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/FooterComponent.js~FooterComponent.html">FooterComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/HeaderComponent.js~HeaderComponent.html">HeaderComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/HomeScreen.js~HomeScreen.html">HomeScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/InputForm.js~InputForm.html">InputForm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/InputFormLogin.js~InputFormLogin.html">InputFormLogin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/JournalScreen.js~JournalScreen.html">JournalScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/ListItem.js~ListItem.html">ListItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/LoginScreen.js~LoginScreen.html">LoginScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/NavigatorComponent.js~NavigatorComponent.html">NavigatorComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/ResourceScreen.js~ResourceScreen.html">ResourceScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/SettingScreen.js~SettingScreen.html">SettingScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/SignupScreen.js~SignupScreen.html">SignupScreen</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Curriculum/Week1</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Curriculum/Week1/QuizFinish.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Curriculum/Week1/Week1A1.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Curriculum/Week1/Week1A2.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Curriculum/Week1/Week1Content.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Curriculum/Week1/Week1Q1.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Curriculum/Week1/Week1Q2.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Curriculum/Week1/Week1Q3.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Curriculum/Week1/Week1Q4.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Curriculum/Week1/Week1Q5.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Data</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Data/CalendarView.js~CalendarView.html">CalendarView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Data/DataInput.js~DataInput.html">DataInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Data/GraphView.js~GraphView.html">GraphView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createLineGraph">createLineGraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-userData">userData</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Journal</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Journal/JournalInput.js~JournalInput.html">JournalInput</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Setting</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Setting/AddAlarm.js~AddAlarm.html">AddAlarm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Setting/AlarmList.js~AlarmList.html">AlarmList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Setting/AlarmSetting.js~AlarmSetting.html">AlarmSetting</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Setting/EditAlarm.js~EditAlarm.html">EditAlarm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/Setting/UserProfile.js~UserProfile.html">UserProfile</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">app/JournalScreen.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React, { Component } from &apos;react&apos;;
import { TouchableOpacity, AppRegistry, Text, StyleSheet, View, ListView, TouchableHighlight, Button, AlertIOS} from &apos;react-native&apos;;
import {Container, Content, Input, Icon, Left, Right, Body, Header, Title  } from &apos;native-base&apos;;
import FooterComponent from &apos;../app/FooterComponent&apos;; 
import NavigatorComponent from &apos;../app/NavigatorComponent&apos;
import HeaderComponent from &apos;../app/HeaderComponent&apos;;
import ListItem from &apos;../app/ListItem&apos;;
import * as firebase from &apos;firebase&apos;;



export default class JournalScreen extends Component {
	constructor(props) { 
		super(props);
		this.state = {
			dataSource: new ListView.DataSource({
				rowHasChanged: (row1, row2) =&gt; row1 !== row2,
			}),
			entry: &quot;&quot;
		};
		this.createJournals = this.createJournals.bind(this);
		this.journalRef = this.getRef().child(&apos;journals&apos;);

	}

	getRef() {
		return firebase.database().ref();
	}

	_renderItem(entry) {
	    return (
	      &lt;ListItem entry={entry} /&gt;
	    );
 	}

  	navigate(routeName){
	    this.props.navigator.push({
	        name: routeName
	    });
	}

	componentDidMount() {
		this.listenForEntries(this.journalRef);
  	}

  	// RenderRow from listview pulls data from the DataSource which is held in the state
  	// DataSource is given a value by this listener which pulls snapshots of data from firebase (entries with two fields)
  	// CloneWithRows takes the data array pulled from firebase and clones into ListItems which is RenderRow&apos;s method call to _renderItem
  	// _renderItem&apos;s argument is the row data set by cloneWithRows
  	listenForEntries(journalRef) {
	    journalRef.on(&apos;value&apos;, (snapshot) =&gt; {

	      // get children as an array, retrieving from firebase and specifying fields to retrieve
	      var entries = [];
	      snapshot.forEach((child) =&gt; {
	        entries.push({
	          date_of_entry: child.val().date_of_entry,
	          entry: child.val().entry
	        });
	      });

	      this.setState({
	        dataSource: this.state.dataSource.cloneWithRows(entries)
	      });

	    });
	}

	createJournals() {
		this.journalRef.set({
			testEntry1: {
				date_of_entry: &quot;April 23&quot;,
				entry: &quot;This is a test journal entry&quot;
			},

			testEntry2: {
				date_of_entry: &quot;April 24&quot;,
				entry: &quot;This is the second test&quot;
			}
		});
	}

	_addEntry() {
		AlertIOS.prompt(
			&apos;Type note here&apos;,
			null,
			[
				{
					text: &apos;Add&apos;,
					onPress: (text) =&gt; {
						this.journalRef.push({
							date_of_entry: new Date().toLocaleString(),
							entry: text
						});
					}
				}, 
			],
			&apos;plain-text&apos;
		);
	}

	render() { 
		return (
	      	&lt;View style={{flex: 1}}&gt;
				  &lt;Container&gt;
				  	&lt;HeaderComponent titleText=&apos;Journal&apos; navigator={this.props.navigator}/&gt;
					&lt;Content&gt;
						&lt;TouchableOpacity style={styles.actionButtonIcon} onPress={this._addEntry.bind(this)}&gt;
							&lt;Text style={styles.textStyle}&gt; + &lt;/Text&gt;
						&lt;/TouchableOpacity&gt;
						
						&lt;ListView
							dataSource={this.state.dataSource}
							renderRow={this._renderItem.bind(this)}
							style={styles.listView}&gt;
						&lt;/ListView&gt;

		              &lt;/Content&gt;
		          &lt;/Container&gt;
					
				&lt;FooterComponent activeTab=&apos;tabFour&apos; navigator={this.props.navigator}/&gt;
			&lt;/View&gt;
		);
	}
}


const styles = StyleSheet.create({
  textStyle: {
    textAlign: &apos;center&apos;,
    color: &apos;#FFFFFF&apos;,
    fontSize: 24,
  },
  row: {
    flexDirection: &apos;row&apos;,
    justifyContent: &apos;center&apos;,
   	alignItems: &apos;center&apos;,
    padding: 10,
    height: 50,
    backgroundColor: &apos;#F6F6F6&apos;,
  },
  actionButtonIcon: {
    alignSelf: &apos;stretch&apos;,
    backgroundColor: &apos;#4286f4&apos;,
    padding: 10,
    flexDirection: &apos;row&apos;,
    justifyContent: &apos;center&apos;,
    alignItems: &apos;center&apos;,
    height: 50,
  },
  style_separator: {
  	flex: 1,
  	height: StyleSheet.hairlineWidth,
  	backgroundColor: &apos;#000&apos;,
  },
})



</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
